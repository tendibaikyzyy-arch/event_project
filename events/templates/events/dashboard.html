 {% load static %}
<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>KINI √ó Yessenov ‚Äî –ö–∞–ª–µ–Ω–¥–∞—Ä—å –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–π</title>
    <link href="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.8/index.global.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.8/index.global.min.js"></script>

    <style>
        body {
            font-family: "Inter", sans-serif;
            background: linear-gradient(135deg, #fff7f0, #fce2d3, #f8e6ff);
            margin: 0;
            padding: 0;
            color: #333;
        }

        header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 40px;
            background: rgba(255,255,255,0.8);
            backdrop-filter: blur(10px);
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        header img {
            height: 50px;
        }

        h1 {
            font-size: 24px;
            color: #ff5722;
        }

        .container {
            display: flex;
            padding: 40px;
            gap: 40px;
        }

        /* –õ–µ–≤–∞—è –∫–æ–ª–æ–Ω–∫–∞ */
        .mini-calendar {
            width: 280px;
            background: #fff;
            border-radius: 12px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            padding: 20px;
        }

        .mini-calendar h2 {
            color: #ff5722;
            text-align: center;
            margin-bottom: 10px;
        }

        /* –ë–æ–ª—å—à–æ–π –∫–∞–ª–µ–Ω–¥–∞—Ä—å */
        #calendar {
            flex: 1;
            background: #fff;
            border-radius: 16px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            padding: 20px;
        }

        .btn {
            background: #ff784e;
            border: none;
            color: white;
            padding: 10px 20px;
            border-radius: 6px;
            font-size: 15px;
            cursor: pointer;
            margin-top: 15px;
            transition: 0.3s;
            width: 100%;
        }

        .btn:hover {
            background: #ff5722;
        }

        footer {
            text-align: center;
            padding: 20px;
            color: #777;
            background: rgba(255,255,255,0.7);
            border-top: 1px solid #ffd4be;
        }

        /* –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ */
        .modal {
            display: none;
            position: fixed;
            top: 0; left: 0;
            width: 100%; height: 100%;
            background: rgba(0,0,0,0.5);
            justify-content: center;
            align-items: center;
            z-index: 9999;
        }

        .modal-content {
            background: white;
            border-radius: 10px;
            padding: 30px;
            width: 400px;
            text-align: center;
            box-shadow: 0 4px 20px rgba(0,0,0,0.3);
        }

        .modal-content h3 {
            color: #ff5722;
            margin-bottom: 10px;
        }

        .close-btn {
            background: #ccc;
            border: none;
            padding: 8px 14px;
            border-radius: 6px;
            cursor: pointer;
            margin-right: 10px;
        }

        .register-btn {
            background: #ff784e;
            color: white;
            border: none;
            padding: 10px 16px;
            border-radius: 6px;
            cursor: pointer;
        }
        .register-btn:hover {
            background: #ff5722;
        }
    </style>
</head>

<body>

<header>
    <img src="{% static 'img/kini.png' %}" alt="Kini Logo">
    <h1>–ö–∞–ª–µ–Ω–¥–∞—Ä—å –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–π</h1>
    <img src="{% static 'img/yessenov.png' %}" alt="Yessenov Logo">
</header>

<div class="container">

   <!-- –õ–µ–≤–∞—è –ø–∞–Ω–µ–ª—å -->
<div class="mini-calendar">
    <h2>–ú–µ–Ω—é</h2>
    <button class="btn" onclick="window.location.href='/create/'">+ –°–æ–∑–¥–∞—Ç—å –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–µ</button>
    <button class="btn" onclick="window.location.href='/events-list/'">üìÖ –í—Å–µ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è</button>
    <button class="btn" onclick="window.location.href='/my-events/'">‚≠ê –ú–æ–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏</button>
    <button class="btn" onclick="window.location.href='/notifications/'">üîî –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è</button>
    <button class="btn" onclick="window.location.href='/logout/'">üö™ –í—ã–π—Ç–∏</button>
</div>

<!-- –ö–∞–ª–µ–Ω–¥–∞—Ä—å -->
    <div id="calendar"></div>
</div>

<footer>¬© 2025 KINI √ó Yessenov | –°–æ–∑–¥–∞–Ω–æ –≤ –ê–∫—Ç–∞—É —Å üíõ</footer>

<!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ -->
<div class="modal" id="eventModal">
    <div class="modal-content">
        <h3 id="modalTitle"></h3>
        <p><strong>–ú–µ—Å—Ç–æ:</strong> <span id="modalPlace"></span></p>
        <p><strong>–î–∞—Ç–∞:</strong> <span id="modalDate"></span></p>
        <div style="margin-top: 15px;">
            <button class="close-btn" onclick="closeModal()">–ó–∞–∫—Ä—ã—Ç—å</button>
            <button id="registerButton" class="register-btn">–ó–∞–ø–∏—Å–∞—Ç—å—Å—è</button>
        </div>
    </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    const events = {{ events_json|safe }};
    const calendarEl = document.getElementById('calendar');
    const calendar = new FullCalendar.Calendar(calendarEl, {
        initialView: 'dayGridMonth',
        locale: 'ru',
        height: 650,
        events: events,
        eventClick: function(info) {
            const event = info.event;
            document.getElementById('modalTitle').innerText = event.title;
            document.getElementById('modalPlace').innerText = event.extendedProps.place || '‚Äî';
            document.getElementById('modalDate').innerText = new Date(event.start).toLocaleString('ru-RU');
            document.getElementById('registerButton').onclick = function() {
                window.location.href = '/register-event/' + event.id + '/';
            };
            document.getElementById('eventModal').style.display = 'flex';
        },
        headerToolbar: {
            left: 'prev,next today',
            center: 'title',
            right: 'dayGridMonth,timeGridWeek,timeGridDay'
        },
        eventColor: '#ff784e',
        eventTextColor: 'white'
    });
    calendar.render();
});

function closeModal() {
    document.getElementById('eventModal').style.display = 'none';
}
</script>

</body>
</html>